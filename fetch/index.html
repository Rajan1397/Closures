<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Learning Fetch</h1>
    <button onclick="getData()">Fetch Data</button>
    <br />
    <br />
<input type="text" placeholder="search for a name" id="myInput" onkeyup="serchFn()">
<br>
<br>
    <table id="table" border="2px">
      <thead>
        <tr>
        <th>Name</th>
        <th>username</th>
        <th>email</th>
      </thead>
</tr>
      <tbody id="table-body">
        <tr></tr>
      </tbody>
    </table>

    <script>
      // fetch with async await
      //   async function getData() {
      //     let res = await fetch("https://jsonplaceholder.typicode.com/users");

      //     const data = await res.json();
      //     console.log(data);
      //   }

      //-------------------
      // fetch using then
      // fetch("https://jsonplaceholder.typicode.com/users")
      //   .then((res) => {
      //     return res.json();
      //   })
      //   .then((res) => {
      //     console.log(res);
      //   })
      //   .catch((err) => {
      //     console.log(error);
      //   });

      async function getData() {
        let res = await fetch("https://jsonplaceholder.typicode.com/users");

        data = await res.json();
        console.log(data);

        displayData(data);
      }

      let tableBody = document.getElementById("table-body");

      function displayData(data) {
        data.map((item) => {
          const tr = document.createElement("tr");
          const name = document.createElement("td");
          name.innerHTML = item.name;

          const username = document.createElement("td");
          username.innerHTML = item.username;

          const email = document.createElement("td");
          email.innerHTML = item.email;

          tr.append(name, username, email);
          tableBody.append(tr);
        });
      }


      function serchFn() {
        let filter = document.getElementById("myInput").value.toUpperCase();

        let table = document.getElementById("table");

        let tr = table.getElementsByTagName("tr");

        for(var i=0; i<tr.length; i++) {

let td = tr[i].getElementsByTagName("td")[0];

if(td) {
  let textvalue = td.textContent || td.innerHTML;

  if(textvalue.toUpperCase().indexOf(filter) > -1) {
    tr[i].style.display = ""
  }
  else {
    tr[i].style.display = "none"
  }
}

        }
      }
    </script>
  </body>
</html>
